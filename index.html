<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c5aa0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Soccer in a Box">
    <title>Soccer in a Box - Match Analysis</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%232c5aa0'/%3E%3Ctext x='50' y='65' font-size='50' text-anchor='middle' fill='white'%3E‚öΩ%3C/text%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Ccircle cx='90' cy='90' r='90' fill='%232c5aa0'/%3E%3Ccircle cx='90' cy='90' r='40' fill='white'/%3E%3Cpolygon points='90,65 100,72 100,82 90,89 80,82 80,72' fill='%232c5aa0'/%3E%3Cpolygon points='90,95 100,102 100,112 90,119 80,112 80,102' fill='%232c5aa0'/%3E%3C/svg%3E">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>‚öΩ Soccer in a Box</h1>
            <p class="subtitle">Minimal Match Analysis Kit</p>
            <div class="status-indicator" id="statusIndicator">
                <span class="offline-dot"></span>
                <span>Modalit√† Offline</span>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab-btn active" data-tab="match-setup">Setup</button>
            <button class="tab-btn" data-tab="live-notes">Note Live</button>
            <button class="tab-btn" data-tab="player-eval">Valutazioni</button>
            <button class="tab-btn" data-tab="reports">Report</button>
        </nav>

        <!-- Tab Content: Match Setup -->
        <section class="tab-content active" id="match-setup">
            <div class="card">
                <h2>üèüÔ∏è Informazioni Match</h2>
                <form id="matchForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="homeTeam">Squadra Casa</label>
                            <input type="text" id="homeTeam" placeholder="Nome squadra casa" required>
                        </div>
                        <div class="form-group">
                            <label for="awayTeam">Squadra Ospite</label>
                            <input type="text" id="awayTeam" placeholder="Nome squadra ospite" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="matchDate">Data</label>
                            <input type="date" id="matchDate" required>
                        </div>
                        <div class="form-group">
                            <label for="competition">Competizione</label>
                            <input type="text" id="competition" placeholder="es. Campionato Regionale">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="venue">Venue</label>
                            <input type="text" id="venue" placeholder="Campo da gioco">
                        </div>
                        <div class="form-group">
                            <label for="weather">Condizioni</label>
                            <select id="weather">
                                <option value="">Seleziona</option>
                                <option value="sole">‚òÄÔ∏è Sole</option>
                                <option value="nuvoloso">‚òÅÔ∏è Nuvoloso</option>
                                <option value="pioggia">üåßÔ∏è Pioggia</option>
                                <option value="vento">üí® Ventoso</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="scoutingFocus">Focus Scouting</label>
                        <select id="scoutingFocus">
                            <option value="team-analysis">Analisi di squadra</option>
                            <option value="individual-player">Giocatore specifico</option>
                            <option value="tactical-observation">Osservazione tattica</option>
                            <option value="physical-assessment">Valutazione fisica</option>
                        </select>
                    </div>

                    <button type="submit" class="btn-primary">Inizia Match Analysis</button>
                </form>
            </div>
        </section>

        <!-- Tab Content: Live Notes -->
        <section class="tab-content" id="live-notes">
            <div class="card">
                <h2>üìù Note Live</h2>
                <div class="match-timer">
                    <div class="timer-display">
                        <span id="matchTime">00:00</span>
                        <div class="timer-controls">
                            <button id="startTimer" class="btn-small">‚ñ∂Ô∏è</button>
                            <button id="pauseTimer" class="btn-small">‚è∏Ô∏è</button>
                            <button id="resetTimer" class="btn-small">üîÑ</button>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <button class="quick-btn" data-action="goal">‚öΩ Gol</button>
                    <button class="quick-btn" data-action="card">üü® Ammonizione</button>
                    <button class="quick-btn" data-action="substitution">üîÑ Cambio</button>
                    <button class="quick-btn" data-action="tactical">üìã Nota Tattica</button>
                </div>

                <div class="note-input">
                    <textarea id="liveNote" placeholder="Inserisci osservazione (tempo automatico)..." rows="3"></textarea>
                    <button id="addNote" class="btn-primary">Aggiungi Nota</button>
                </div>

                <div class="notes-timeline" id="notesTimeline">
                    <!-- Le note verranno aggiunte dinamicamente qui -->
                </div>
            </div>
        </section>

        <!-- Tab Content: Player Evaluation -->
        <section class="tab-content" id="player-eval">
            <div class="card">
                <h2>üë§ Valutazioni Giocatori</h2>
                <div class="player-selector">
                    <input type="text" id="playerName" placeholder="Nome giocatore">
                    <input type="number" id="playerNumber" placeholder="Numero" min="1" max="99">
                    <select id="playerPosition">
                        <option value="">Ruolo</option>
                        <option value="GK">Portiere</option>
                        <option value="CB">Difensore Centrale</option>
                        <option value="FB">Terzino</option>
                        <option value="CM">Centrocampista</option>
                        <option value="CAM">Trequartista</option>
                        <option value="W">Ala</option>
                        <option value="ST">Attaccante</option>
                    </select>
                </div>

                <div class="evaluation-grid">
                    <div class="eval-category">
                        <h3>Tecnica</h3>
                        <div class="rating-row">
                            <label>Controllo palla</label>
                            <div class="rating" data-skill="ball-control">
                                <span class="star" data-value="1">‚≠ê</span>
                                <span class="star" data-value="2">‚≠ê</span>
                                <span class="star" data-value="3">‚≠ê</span>
                                <span class="star" data-value="4">‚≠ê</span>
                                <span class="star" data-value="5">‚≠ê</span>
                            </div>
                        </div>
                        <div class="rating-row">
                            <label>Passaggio</label>
                            <div class="rating" data-skill="passing">
                                <span class="star" data-value="1">‚≠ê</span>
                                <span class="star" data-value="2">‚≠ê</span>
                                <span class="star" data-value="3">‚≠ê</span>
                                <span class="star" data-value="4">‚≠ê</span>
                                <span class="star" data-value="5">‚≠ê</span>
                            </div>
                        </div>
                    </div>

                    <div class="eval-category">
                        <h3>Fisico</h3>
                        <div class="rating-row">
                            <label>Velocit√†</label>
                            <div class="rating" data-skill="speed">
                                <span class="star" data-value="1">‚≠ê</span>
                                <span class="star" data-value="2">‚≠ê</span>
                                <span class="star" data-value="3">‚≠ê</span>
                                <span class="star" data-value="4">‚≠ê</span>
                                <span class="star" data-value="5">‚≠ê</span>
                            </div>
                        </div>
                        <div class="rating-row">
                            <label>Resistenza</label>
                            <div class="rating" data-skill="stamina">
                                <span class="star" data-value="1">‚≠ê</span>
                                <span class="star" data-value="2">‚≠ê</span>
                                <span class="star" data-value="3">‚≠ê</span>
                                <span class="star" data-value="4">‚≠ê</span>
                                <span class="star" data-value="5">‚≠ê</span>
                            </div>
                        </div>
                    </div>

                    <div class="eval-category">
                        <h3>Mentale</h3>
                        <div class="rating-row">
                            <label>Decisione</label>
                            <div class="rating" data-skill="decision">
                                <span class="star" data-value="1">‚≠ê</span>
                                <span class="star" data-value="2">‚≠ê</span>
                                <span class="star" data-value="3">‚≠ê</span>
                                <span class="star" data-value="4">‚≠ê</span>
                                <span class="star" data-value="5">‚≠ê</span>
                            </div>
                        </div>
                        <div class="rating-row">
                            <label>Leadership</label>
                            <div class="rating" data-skill="leadership">
                                <span class="star" data-value="1">‚≠ê</span>
                                <span class="star" data-value="2">‚≠ê</span>
                                <span class="star" data-value="3">‚≠ê</span>
                                <span class="star" data-value="4">‚≠ê</span>
                                <span class="star" data-value="5">‚≠ê</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="player-notes">
                    <textarea id="playerNotes" placeholder="Note specifiche sul giocatore..." rows="3"></textarea>
                </div>

                <button id="savePlayer" class="btn-primary">Salva Valutazione</button>

                <div class="saved-players" id="savedPlayers">
                    <!-- Lista giocatori valutati -->
                </div>
            </div>
        </section>

        <!-- Tab Content: Reports -->
        <section class="tab-content" id="reports">
            <div class="card">
                <h2>üìä Report e Export</h2>
                
                <div class="report-summary" id="reportSummary">
                    <div class="summary-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="totalNotes">0</span>
                            <span class="stat-label">Note Totali</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="totalPlayers">0</span>
                            <span class="stat-label">Giocatori Valutati</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="matchDuration">0</span>
                            <span class="stat-label">Durata (min)</span>
                        </div>
                    </div>
                </div>

                <div class="export-options">
                    <button id="exportMarkdown" class="btn-secondary">üìÑ Esporta Markdown</button>
                    <button id="exportText" class="btn-secondary">üìù Esporta TXT</button>
                    <button id="clearData" class="btn-warning">üóëÔ∏è Cancella Tutto</button>
                </div>

                <div class="report-preview" id="reportPreview">
                    <!-- Anteprima del report -->
                </div>
            </div>
        </section>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        // Registrazione Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(() => console.log('SW registered'))
                    .catch(() => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>
